---
date: 2025-03-25 13:51:09
tags:
  - JavaScript
  - 面试
  - 前端
  - 手撕代码
---

# 手撕事件总线

## 基础版本

先写一个最基础的版本，可以实现事件的监听和触发，其中对于触发，我们需要考虑传参问题。

<<< ./snippets/event-bus-base.js

## 多实例

接下来，我们考虑多实例的问题，这里就涉及到了事件的取消监听，并且这里很大一部分都要进行改动——因为对于每个实例都要有唯一标识。

<<< ./snippets/event-bus-multi.js{10-12,19,24-33}

## 销毁以及只执行一次

最后，再考虑一下事件总线的销毁和只执行一次的事件。

<<< ./snippets/event-bus-destroy.js{9-11,18-26}

## 总结

呈上最终完整的代码：

<<< ./snippets/event-bus.js
